[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed
TRADE MANAGER PARAMS
{'DAYS_TO_KEEP_LIMIT': 7, 'KEEP_HOLDING_RATE': 0, 'TAKE_PROFIT_ACTIVE_ACTION': (2, 1.5), 'USE_ATR': True}
TRAINING PHASE
Train for WMT
{<DecisionTreeTradeAlgorithmHyperparam.DAYS_TO_KEEP_LIMIT: 8>: 7, <DecisionTreeTradeAlgorithmHyperparam.ATR_PERIOD: 9>: 14, <DecisionTreeTradeAlgorithmHyperparam.RISK_MANAGER_HYPERPARAMS: 7>: {<RiskManagerHyperparam.BID_RISK_RATE: 5>: 0, <RiskManagerHyperparam.USE_ATR: 8>: True, <RiskManagerHyperparam.ACTIVE_ACTION_MULTIPLIER: 7>: 1.5, <RiskManagerHyperparam.TAKE_PROFIT_MULTIPLIER: 6>: 2}, <DecisionTreeTradeAlgorithmHyperparam.RSI_HYPERPARAMS: 1>: {'N': 14}, <DecisionTreeTradeAlgorithmHyperparam.MACD_HYPERPARAMS: 2>: {<MACDHyperparam.SHORT_PERIOD: 1>: 12, <MACDHyperparam.LONG_PERIOD: 2>: 26, <MACDHyperparam.SIGNAL_PERIOD: 3>: 9, <MACDHyperparam.TRADE_STRATEGY: 4>: <MACDTradeStrategy.CLASSIC: (1,)>}, <DecisionTreeTradeAlgorithmHyperparam.SUPER_TREND_HYPERPARAMS: 3>: {<SuperTrendHyperparam.LOOKBACK_PERIOD: 1>: 10, <SuperTrendHyperparam.MULTIPLIER: 2>: 3}, <DecisionTreeTradeAlgorithmHyperparam.CCI_HYPERPARAMS: 4>: {'N': 20}, <DecisionTreeTradeAlgorithmHyperparam.BOLLINGER_BANDS_HYPERPARAMS: 5>: {<BollingerBandsHyperparam.N: 1>: 20, <BollingerBandsHyperparam.K: 2>: 2}, <DecisionTreeTradeAlgorithmHyperparam.MA_SUPPORT_LEVELS_HYPERPARAMS: 6>: {'ma_periods': [20, 30, 50, 100, 150, 200]}, 'DATA_NAME': 'WMT'}
Earnings = 228.27007293701172
{<DecisionTreeTradeAlgorithmHyperparam.DAYS_TO_KEEP_LIMIT: 8>: 7, <DecisionTreeTradeAlgorithmHyperparam.ATR_PERIOD: 9>: 14, <DecisionTreeTradeAlgorithmHyperparam.RISK_MANAGER_HYPERPARAMS: 7>: {<RiskManagerHyperparam.BID_RISK_RATE: 5>: 0, <RiskManagerHyperparam.USE_ATR: 8>: True, <RiskManagerHyperparam.ACTIVE_ACTION_MULTIPLIER: 7>: 1.5, <RiskManagerHyperparam.TAKE_PROFIT_MULTIPLIER: 6>: 2}, <DecisionTreeTradeAlgorithmHyperparam.RSI_HYPERPARAMS: 1>: {'N': 14}, <DecisionTreeTradeAlgorithmHyperparam.MACD_HYPERPARAMS: 2>: {<MACDHyperparam.SHORT_PERIOD: 1>: 10, <MACDHyperparam.LONG_PERIOD: 2>: 22, <MACDHyperparam.SIGNAL_PERIOD: 3>: 9, <MACDHyperparam.TRADE_STRATEGY: 4>: <MACDTradeStrategy.CONVERGENCE: 2>}, <DecisionTreeTradeAlgorithmHyperparam.SUPER_TREND_HYPERPARAMS: 3>: {<SuperTrendHyperparam.LOOKBACK_PERIOD: 1>: 10, <SuperTrendHyperparam.MULTIPLIER: 2>: 3}, <DecisionTreeTradeAlgorithmHyperparam.CCI_HYPERPARAMS: 4>: {'N': 20}, <DecisionTreeTradeAlgorithmHyperparam.BOLLINGER_BANDS_HYPERPARAMS: 5>: {<BollingerBandsHyperparam.N: 1>: 20, <BollingerBandsHyperparam.K: 2>: 2}, <DecisionTreeTradeAlgorithmHyperparam.MA_SUPPORT_LEVELS_HYPERPARAMS: 6>: {'ma_periods': [20, 30, 50, 100, 150, 200]}, 'DATA_NAME': 'WMT'}
Earnings = -402.3616180419922
Train for AAPL
{<DecisionTreeTradeAlgorithmHyperparam.DAYS_TO_KEEP_LIMIT: 8>: 7, <DecisionTreeTradeAlgorithmHyperparam.ATR_PERIOD: 9>: 14, <DecisionTreeTradeAlgorithmHyperparam.RISK_MANAGER_HYPERPARAMS: 7>: {<RiskManagerHyperparam.BID_RISK_RATE: 5>: 0, <RiskManagerHyperparam.USE_ATR: 8>: True, <RiskManagerHyperparam.ACTIVE_ACTION_MULTIPLIER: 7>: 1.5, <RiskManagerHyperparam.TAKE_PROFIT_MULTIPLIER: 6>: 2}, <DecisionTreeTradeAlgorithmHyperparam.RSI_HYPERPARAMS: 1>: {'N': 14}, <DecisionTreeTradeAlgorithmHyperparam.MACD_HYPERPARAMS: 2>: {<MACDHyperparam.SHORT_PERIOD: 1>: 12, <MACDHyperparam.LONG_PERIOD: 2>: 26, <MACDHyperparam.SIGNAL_PERIOD: 3>: 9, <MACDHyperparam.TRADE_STRATEGY: 4>: <MACDTradeStrategy.CLASSIC: (1,)>}, <DecisionTreeTradeAlgorithmHyperparam.SUPER_TREND_HYPERPARAMS: 3>: {<SuperTrendHyperparam.LOOKBACK_PERIOD: 1>: 10, <SuperTrendHyperparam.MULTIPLIER: 2>: 3}, <DecisionTreeTradeAlgorithmHyperparam.CCI_HYPERPARAMS: 4>: {'N': 20}, <DecisionTreeTradeAlgorithmHyperparam.BOLLINGER_BANDS_HYPERPARAMS: 5>: {<BollingerBandsHyperparam.N: 1>: 20, <BollingerBandsHyperparam.K: 2>: 2}, <DecisionTreeTradeAlgorithmHyperparam.MA_SUPPORT_LEVELS_HYPERPARAMS: 6>: {'ma_periods': [20, 30, 50, 100, 150, 200]}, 'DATA_NAME': 'AAPL'}
Earnings = -1066.071475982666
{<DecisionTreeTradeAlgorithmHyperparam.DAYS_TO_KEEP_LIMIT: 8>: 7, <DecisionTreeTradeAlgorithmHyperparam.ATR_PERIOD: 9>: 14, <DecisionTreeTradeAlgorithmHyperparam.RISK_MANAGER_HYPERPARAMS: 7>: {<RiskManagerHyperparam.BID_RISK_RATE: 5>: 0, <RiskManagerHyperparam.USE_ATR: 8>: True, <RiskManagerHyperparam.ACTIVE_ACTION_MULTIPLIER: 7>: 1.5, <RiskManagerHyperparam.TAKE_PROFIT_MULTIPLIER: 6>: 2}, <DecisionTreeTradeAlgorithmHyperparam.RSI_HYPERPARAMS: 1>: {'N': 14}, <DecisionTreeTradeAlgorithmHyperparam.MACD_HYPERPARAMS: 2>: {<MACDHyperparam.SHORT_PERIOD: 1>: 10, <MACDHyperparam.LONG_PERIOD: 2>: 22, <MACDHyperparam.SIGNAL_PERIOD: 3>: 9, <MACDHyperparam.TRADE_STRATEGY: 4>: <MACDTradeStrategy.CONVERGENCE: 2>}, <DecisionTreeTradeAlgorithmHyperparam.SUPER_TREND_HYPERPARAMS: 3>: {<SuperTrendHyperparam.LOOKBACK_PERIOD: 1>: 10, <SuperTrendHyperparam.MULTIPLIER: 2>: 3}, <DecisionTreeTradeAlgorithmHyperparam.CCI_HYPERPARAMS: 4>: {'N': 20}, <DecisionTreeTradeAlgorithmHyperparam.BOLLINGER_BANDS_HYPERPARAMS: 5>: {<BollingerBandsHyperparam.N: 1>: 20, <BollingerBandsHyperparam.K: 2>: 2}, <DecisionTreeTradeAlgorithmHyperparam.MA_SUPPORT_LEVELS_HYPERPARAMS: 6>: {'ma_periods': [20, 30, 50, 100, 150, 200]}, 'DATA_NAME': 'AAPL'}
Earnings = 1401.6422157287598
TRADING PHASE
Final account money = 197992.55712127686
TRADE MANAGER PARAMS
{'DAYS_TO_KEEP_LIMIT': 14, 'KEEP_HOLDING_RATE': 0, 'TAKE_PROFIT_ACTIVE_ACTION': (2, 1), 'BID_RISK_RATE': 0.075}
TRAINING PHASE
Train for WMT
{<DecisionTreeTradeAlgorithmHyperparam.DAYS_TO_KEEP_LIMIT: 8>: 14, <DecisionTreeTradeAlgorithmHyperparam.ATR_PERIOD: 9>: 14, <DecisionTreeTradeAlgorithmHyperparam.RISK_MANAGER_HYPERPARAMS: 7>: {<RiskManagerHyperparam.BID_RISK_RATE: 5>: 0.075, <RiskManagerHyperparam.USE_ATR: 8>: False, <RiskManagerHyperparam.ACTIVE_ACTION_MULTIPLIER: 7>: 1, <RiskManagerHyperparam.TAKE_PROFIT_MULTIPLIER: 6>: 2}, <DecisionTreeTradeAlgorithmHyperparam.RSI_HYPERPARAMS: 1>: {'N': 14}, <DecisionTreeTradeAlgorithmHyperparam.MACD_HYPERPARAMS: 2>: {<MACDHyperparam.SHORT_PERIOD: 1>: 12, <MACDHyperparam.LONG_PERIOD: 2>: 26, <MACDHyperparam.SIGNAL_PERIOD: 3>: 9, <MACDHyperparam.TRADE_STRATEGY: 4>: <MACDTradeStrategy.CLASSIC: (1,)>}, <DecisionTreeTradeAlgorithmHyperparam.SUPER_TREND_HYPERPARAMS: 3>: {<SuperTrendHyperparam.LOOKBACK_PERIOD: 1>: 10, <SuperTrendHyperparam.MULTIPLIER: 2>: 3}, <DecisionTreeTradeAlgorithmHyperparam.CCI_HYPERPARAMS: 4>: {'N': 20}, <DecisionTreeTradeAlgorithmHyperparam.BOLLINGER_BANDS_HYPERPARAMS: 5>: {<BollingerBandsHyperparam.N: 1>: 20, <BollingerBandsHyperparam.K: 2>: 2}, <DecisionTreeTradeAlgorithmHyperparam.MA_SUPPORT_LEVELS_HYPERPARAMS: 6>: {'ma_periods': [20, 30, 50, 100, 150, 200]}, 'DATA_NAME': 'WMT'}
Earnings = 0.0
{<DecisionTreeTradeAlgorithmHyperparam.DAYS_TO_KEEP_LIMIT: 8>: 14, <DecisionTreeTradeAlgorithmHyperparam.ATR_PERIOD: 9>: 14, <DecisionTreeTradeAlgorithmHyperparam.RISK_MANAGER_HYPERPARAMS: 7>: {<RiskManagerHyperparam.BID_RISK_RATE: 5>: 0.075, <RiskManagerHyperparam.USE_ATR: 8>: False, <RiskManagerHyperparam.ACTIVE_ACTION_MULTIPLIER: 7>: 1, <RiskManagerHyperparam.TAKE_PROFIT_MULTIPLIER: 6>: 2}, <DecisionTreeTradeAlgorithmHyperparam.RSI_HYPERPARAMS: 1>: {'N': 14}, <DecisionTreeTradeAlgorithmHyperparam.MACD_HYPERPARAMS: 2>: {<MACDHyperparam.SHORT_PERIOD: 1>: 10, <MACDHyperparam.LONG_PERIOD: 2>: 22, <MACDHyperparam.SIGNAL_PERIOD: 3>: 9, <MACDHyperparam.TRADE_STRATEGY: 4>: <MACDTradeStrategy.CONVERGENCE: 2>}, <DecisionTreeTradeAlgorithmHyperparam.SUPER_TREND_HYPERPARAMS: 3>: {<SuperTrendHyperparam.LOOKBACK_PERIOD: 1>: 10, <SuperTrendHyperparam.MULTIPLIER: 2>: 3}, <DecisionTreeTradeAlgorithmHyperparam.CCI_HYPERPARAMS: 4>: {'N': 20}, <DecisionTreeTradeAlgorithmHyperparam.BOLLINGER_BANDS_HYPERPARAMS: 5>: {<BollingerBandsHyperparam.N: 1>: 20, <BollingerBandsHyperparam.K: 2>: 2}, <DecisionTreeTradeAlgorithmHyperparam.MA_SUPPORT_LEVELS_HYPERPARAMS: 6>: {'ma_periods': [20, 30, 50, 100, 150, 200]}, 'DATA_NAME': 'WMT'}
Earnings = -60.85972595214844
Train for AAPL
{<DecisionTreeTradeAlgorithmHyperparam.DAYS_TO_KEEP_LIMIT: 8>: 14, <DecisionTreeTradeAlgorithmHyperparam.ATR_PERIOD: 9>: 14, <DecisionTreeTradeAlgorithmHyperparam.RISK_MANAGER_HYPERPARAMS: 7>: {<RiskManagerHyperparam.BID_RISK_RATE: 5>: 0.075, <RiskManagerHyperparam.USE_ATR: 8>: False, <RiskManagerHyperparam.ACTIVE_ACTION_MULTIPLIER: 7>: 1, <RiskManagerHyperparam.TAKE_PROFIT_MULTIPLIER: 6>: 2}, <DecisionTreeTradeAlgorithmHyperparam.RSI_HYPERPARAMS: 1>: {'N': 14}, <DecisionTreeTradeAlgorithmHyperparam.MACD_HYPERPARAMS: 2>: {<MACDHyperparam.SHORT_PERIOD: 1>: 12, <MACDHyperparam.LONG_PERIOD: 2>: 26, <MACDHyperparam.SIGNAL_PERIOD: 3>: 9, <MACDHyperparam.TRADE_STRATEGY: 4>: <MACDTradeStrategy.CLASSIC: (1,)>}, <DecisionTreeTradeAlgorithmHyperparam.SUPER_TREND_HYPERPARAMS: 3>: {<SuperTrendHyperparam.LOOKBACK_PERIOD: 1>: 10, <SuperTrendHyperparam.MULTIPLIER: 2>: 3}, <DecisionTreeTradeAlgorithmHyperparam.CCI_HYPERPARAMS: 4>: {'N': 20}, <DecisionTreeTradeAlgorithmHyperparam.BOLLINGER_BANDS_HYPERPARAMS: 5>: {<BollingerBandsHyperparam.N: 1>: 20, <BollingerBandsHyperparam.K: 2>: 2}, <DecisionTreeTradeAlgorithmHyperparam.MA_SUPPORT_LEVELS_HYPERPARAMS: 6>: {'ma_periods': [20, 30, 50, 100, 150, 200]}, 'DATA_NAME': 'AAPL'}
Earnings = 173.17283248901367
{<DecisionTreeTradeAlgorithmHyperparam.DAYS_TO_KEEP_LIMIT: 8>: 14, <DecisionTreeTradeAlgorithmHyperparam.ATR_PERIOD: 9>: 14, <DecisionTreeTradeAlgorithmHyperparam.RISK_MANAGER_HYPERPARAMS: 7>: {<RiskManagerHyperparam.BID_RISK_RATE: 5>: 0.075, <RiskManagerHyperparam.USE_ATR: 8>: False, <RiskManagerHyperparam.ACTIVE_ACTION_MULTIPLIER: 7>: 1, <RiskManagerHyperparam.TAKE_PROFIT_MULTIPLIER: 6>: 2}, <DecisionTreeTradeAlgorithmHyperparam.RSI_HYPERPARAMS: 1>: {'N': 14}, <DecisionTreeTradeAlgorithmHyperparam.MACD_HYPERPARAMS: 2>: {<MACDHyperparam.SHORT_PERIOD: 1>: 10, <MACDHyperparam.LONG_PERIOD: 2>: 22, <MACDHyperparam.SIGNAL_PERIOD: 3>: 9, <MACDHyperparam.TRADE_STRATEGY: 4>: <MACDTradeStrategy.CONVERGENCE: 2>}, <DecisionTreeTradeAlgorithmHyperparam.SUPER_TREND_HYPERPARAMS: 3>: {<SuperTrendHyperparam.LOOKBACK_PERIOD: 1>: 10, <SuperTrendHyperparam.MULTIPLIER: 2>: 3}, <DecisionTreeTradeAlgorithmHyperparam.CCI_HYPERPARAMS: 4>: {'N': 20}, <DecisionTreeTradeAlgorithmHyperparam.BOLLINGER_BANDS_HYPERPARAMS: 5>: {<BollingerBandsHyperparam.N: 1>: 20, <BollingerBandsHyperparam.K: 2>: 2}, <DecisionTreeTradeAlgorithmHyperparam.MA_SUPPORT_LEVELS_HYPERPARAMS: 6>: {'ma_periods': [20, 30, 50, 100, 150, 200]}, 'DATA_NAME': 'AAPL'}
Earnings = 664.887451171875
TRADING PHASE
Final account money = 200011.54251098633
BEST TRADE MANAGER PARAMS
{'DAYS_TO_KEEP_LIMIT': 14, 'KEEP_HOLDING_RATE': 0, 'TAKE_PROFIT_ACTIVE_ACTION': (2, 1), 'BID_RISK_RATE': 0.075}
CHOSEN PARAMS
[('WMT', {<DecisionTreeTradeAlgorithmHyperparam.DAYS_TO_KEEP_LIMIT: 8>: 14, <DecisionTreeTradeAlgorithmHyperparam.ATR_PERIOD: 9>: 14, <DecisionTreeTradeAlgorithmHyperparam.RISK_MANAGER_HYPERPARAMS: 7>: {<RiskManagerHyperparam.BID_RISK_RATE: 5>: 0.075, <RiskManagerHyperparam.USE_ATR: 8>: False, <RiskManagerHyperparam.ACTIVE_ACTION_MULTIPLIER: 7>: 1, <RiskManagerHyperparam.TAKE_PROFIT_MULTIPLIER: 6>: 2}, <DecisionTreeTradeAlgorithmHyperparam.RSI_HYPERPARAMS: 1>: {'N': 14}, <DecisionTreeTradeAlgorithmHyperparam.MACD_HYPERPARAMS: 2>: {<MACDHyperparam.SHORT_PERIOD: 1>: 12, <MACDHyperparam.LONG_PERIOD: 2>: 26, <MACDHyperparam.SIGNAL_PERIOD: 3>: 9, <MACDHyperparam.TRADE_STRATEGY: 4>: <MACDTradeStrategy.CLASSIC: (1,)>}, <DecisionTreeTradeAlgorithmHyperparam.SUPER_TREND_HYPERPARAMS: 3>: {<SuperTrendHyperparam.LOOKBACK_PERIOD: 1>: 10, <SuperTrendHyperparam.MULTIPLIER: 2>: 3}, <DecisionTreeTradeAlgorithmHyperparam.CCI_HYPERPARAMS: 4>: {'N': 20}, <DecisionTreeTradeAlgorithmHyperparam.BOLLINGER_BANDS_HYPERPARAMS: 5>: {<BollingerBandsHyperparam.N: 1>: 20, <BollingerBandsHyperparam.K: 2>: 2}, <DecisionTreeTradeAlgorithmHyperparam.MA_SUPPORT_LEVELS_HYPERPARAMS: 6>: {'ma_periods': [20, 30, 50, 100, 150, 200]}, 'DATA_NAME': 'AAPL'}), ('AAPL', {<DecisionTreeTradeAlgorithmHyperparam.DAYS_TO_KEEP_LIMIT: 8>: 14, <DecisionTreeTradeAlgorithmHyperparam.ATR_PERIOD: 9>: 14, <DecisionTreeTradeAlgorithmHyperparam.RISK_MANAGER_HYPERPARAMS: 7>: {<RiskManagerHyperparam.BID_RISK_RATE: 5>: 0.075, <RiskManagerHyperparam.USE_ATR: 8>: False, <RiskManagerHyperparam.ACTIVE_ACTION_MULTIPLIER: 7>: 1, <RiskManagerHyperparam.TAKE_PROFIT_MULTIPLIER: 6>: 2}, <DecisionTreeTradeAlgorithmHyperparam.RSI_HYPERPARAMS: 1>: {'N': 14}, <DecisionTreeTradeAlgorithmHyperparam.MACD_HYPERPARAMS: 2>: {<MACDHyperparam.SHORT_PERIOD: 1>: 10, <MACDHyperparam.LONG_PERIOD: 2>: 22, <MACDHyperparam.SIGNAL_PERIOD: 3>: 9, <MACDHyperparam.TRADE_STRATEGY: 4>: <MACDTradeStrategy.CONVERGENCE: 2>}, <DecisionTreeTradeAlgorithmHyperparam.SUPER_TREND_HYPERPARAMS: 3>: {<SuperTrendHyperparam.LOOKBACK_PERIOD: 1>: 10, <SuperTrendHyperparam.MULTIPLIER: 2>: 3}, <DecisionTreeTradeAlgorithmHyperparam.CCI_HYPERPARAMS: 4>: {'N': 20}, <DecisionTreeTradeAlgorithmHyperparam.BOLLINGER_BANDS_HYPERPARAMS: 5>: {<BollingerBandsHyperparam.N: 1>: 20, <BollingerBandsHyperparam.K: 2>: 2}, <DecisionTreeTradeAlgorithmHyperparam.MA_SUPPORT_LEVELS_HYPERPARAMS: 6>: {'ma_periods': [20, 30, 50, 100, 150, 200]}, 'DATA_NAME': 'AAPL'})]
            EARNED_PROFIT  WINS  LOSES  DRAWS
STOCK_NAME                                   
AAPL          -363.367035     1      5     12
WMT            374.909546     0      0      3
TOTAL           11.542511     1      5     15
WIN RATE = 0.047619047619047616
LOSE RATE = 0.23809523809523808
RETURN ON START CAPITAL = 5.771255493164062e-05
MAX DROWDOWN = 1480.2924118041992
AVG WIN / AVG LOSE = 1.3394634285962963
Sharpe ratio = 2.7440109990467165e-06
Calmar ratio = 2.7280255240941234e-06
Traceback (most recent call last):
  File "C:\Projects\TradingAlgorithm\final_experiments\indicators_summary\decision_tree\decision_tree_experiment.py", line 89, in <module>
    eb.print_best_manager_results(best_trade_manager, best_trade_manager_params)
  File "C:\Projects\TradingAlgorithm\final_experiments\experiment_base.py", line 87, in print_best_manager_results
    best_trade_manager.plot_stock_history(company, plot_algorithm_graph=True, img_dir=img_dir)
  File "C:\Projects\TradingAlgorithm\trading\trade_manager.py", line 394, in plot_stock_history
    stock = self._tracked_stocks[stock_name]
KeyError: 'MSFT'
